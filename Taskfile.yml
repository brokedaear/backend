# SPDX-FileCopyrightText: 2025 BROKE DA EAR LLC <https://brokedaear.com>
#
# SPDX-License-Identifier: Unlicense

version: "3"

silent: true

tasks:
  license: # annotate passed files with reuse license
    cmds: # usage: task license -- <files/dirs/globs>
      - reuse annotate --copyright="{{.REUSE_COPYRIGHT}}" --license="{{.REUSE_LICENSE}}" {{.CLI_ARGS}}
  fmt: # Formats all files
    cmds:
      - nix fmt .
  lint-go: # lints all Go files
    cmds:
      - golangci-lint run
  lint-reuse: # lints LICENSE inclusions
    cmds:
      - reuse lint
  test-all:
    cmds:
      - gotestsum
    silent: true
  test-core:
    cmds:
      - gotestsum --format testdox ./internal/core/...
  test-core-server:
    cmds:
      - gotestsum --format testdox ./internal/core/server/...
  test-common:
    cmds:
      - gotestsum --format testdox ./internal/common/...
  test-internal:
    cmds:
      - gotestsum --format testdox ./internal/...
